<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–∫–µ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä –¢—Ä–µ–∫–µ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞</h1>
            <div class="header-actions">
                <button id="distributeBtn" class="btn btn-primary">–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞–¥–∞—á–∏</button>
                <button id="resetBtn" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
                <button id="exportBtn" class="btn btn-primary">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
            </div>
        </header>

        <div class="stats-overview">
            <div class="stat-card">
                <div class="stat-label">–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å</div>
                <div class="stat-value" id="totalProgress">0%</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="totalProgressBar"></div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ —á–∞—Å–æ–≤</div>
                <div class="stat-value" id="completedHours">0h</div>
                <div class="stat-subtitle">–∏–∑ 714h</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">–ó–∞–≤–µ—Ä—à–µ–Ω–æ —Ñ–∞–∑</div>
                <div class="stat-value" id="completedPhases">0</div>
                <div class="stat-subtitle">–∏–∑ 11</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">MRs</div>
                <div class="stat-value" id="completedMRs">0</div>
                <div class="stat-subtitle">–∏–∑ 508</div>
            </div>
        </div>

        <div class="filters">
            <label for="programmerFilter">–§–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É:</label>
            <select id="programmerFilter">
                <option value="all">–í—Å–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã</option>
                <option value="programmer1">–ñ–µ–Ω—è</option>
                <option value="programmer2">–Æ—Ä–∞</option>
                <option value="programmer3">–†–æ–º–∞</option>
            </select>
        </div>

        <div class="phases-container" id="phasesContainer">
            <!-- Phases will be dynamically generated -->
        </div>

        <div class="programmers-section">
            <h2>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞–º</h2>
            <div class="programmers-grid" id="programmersGrid">
                <!-- Programmer cards will be dynamically generated -->
            </div>
        </div>
    </div>

    <!-- Modal for assigning programmer -->
    <div id="assignModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>–ù–∞–∑–Ω–∞—á–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞</h2>
            <p id="modalDescription">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞: <strong id="modalPhaseName"></strong></p>
            <div class="programmer-options">
                <button class="programmer-btn" data-programmer="programmer1">
                    <span class="programmer-icon">üë®‚Äçüíª</span>
                    <span>–ñ–µ–Ω—è</span>
                </button>
                <button class="programmer-btn" data-programmer="programmer2">
                    <span class="programmer-icon">üë®‚Äçüíª</span>
                    <span>–Æ—Ä–∞</span>
                </button>
                <button class="programmer-btn" data-programmer="programmer3">
                    <span class="programmer-icon">üë®‚Äçüíª</span>
                    <span>–†–æ–º–∞</span>
                </button>
                <button class="programmer-btn" data-programmer="unassigned">
                    <span class="programmer-icon">‚ùå</span>
                    <span>–°–Ω—è—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK v6.6.1 - —Å—Ç–∞—Ä–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —á–µ—Ä–µ–∑ unpkg CDN (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π CDN) -->
    <script src="https://unpkg.com/firebase@6.6.1/dist/firebase-app.js"></script>
    <script src="https://unpkg.com/firebase@6.6.1/dist/firebase-database.js"></script>
    <script>
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É Firebase
        window.addEventListener('load', function() {
            setTimeout(function() {
                if (typeof firebase !== 'undefined') {
                    console.log('‚úÖ Firebase SDK –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ unpkg (–≤–µ—Ä—Å–∏—è 6.6.1)');
                    console.log('firebase –æ–±—ä–µ–∫—Ç:', typeof firebase);
                    console.log('firebase.initializeApp:', typeof firebase.initializeApp);
                } else {
                    console.error('‚ùå Firebase SDK –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ unpkg!');
                    console.log('–ü—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Google CDN...');
                    // Fallback: –∑–∞–≥—Ä—É–∂–∞–µ–º —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Google CDN
                    const script1 = document.createElement('script');
                    script1.src = 'https://www.gstatic.com/firebasejs/6.6.1/firebase-app.js';
                    script1.onerror = function() {
                        console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ firebase-app.js —á–µ—Ä–µ–∑ Google CDN');
                    };
                    script1.onload = function() {
                        console.log('‚úÖ firebase-app.js –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ Google CDN');
                        const script2 = document.createElement('script');
                        script2.src = 'https://www.gstatic.com/firebasejs/6.6.1/firebase-database.js';
                        script2.onerror = function() {
                            console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ firebase-database.js —á–µ—Ä–µ–∑ Google CDN');
                        };
                        script2.onload = function() {
                            console.log('‚úÖ firebase-database.js –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ Google CDN');
                        };
                        document.head.appendChild(script2);
                    };
                    document.head.appendChild(script1);
                }
            }, 1500);
        });
    </script>
    <!-- –ù–∞—à–∏ —Å–∫—Ä–∏–ø—Ç—ã –ø–æ—Å–ª–µ Firebase -->
    <script src="firebase-config.js"></script>
    <script src="script.js"></script>
</body>
</html>
