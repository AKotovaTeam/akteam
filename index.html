<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–∫–µ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä –¢—Ä–µ–∫–µ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞</h1>
            <div class="header-actions">
                <button id="distributeBtn" class="btn btn-primary">–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞–¥–∞—á–∏</button>
                <button id="resetBtn" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
                <button id="exportBtn" class="btn btn-primary">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
            </div>
        </header>

        <div class="stats-overview">
            <div class="stat-card">
                <div class="stat-label">–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å</div>
                <div class="stat-value" id="totalProgress">0%</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="totalProgressBar"></div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ —á–∞—Å–æ–≤</div>
                <div class="stat-value" id="completedHours">0h</div>
                <div class="stat-subtitle">–∏–∑ 714h</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">–ó–∞–≤–µ—Ä—à–µ–Ω–æ —Ñ–∞–∑</div>
                <div class="stat-value" id="completedPhases">0</div>
                <div class="stat-subtitle">–∏–∑ 11</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">MRs</div>
                <div class="stat-value" id="completedMRs">0</div>
                <div class="stat-subtitle">–∏–∑ 508</div>
            </div>
        </div>

        <div class="filters">
            <label for="programmerFilter">–§–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É:</label>
            <select id="programmerFilter">
                <option value="all">–í—Å–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã</option>
                <option value="programmer1">–ñ–µ–Ω—è</option>
                <option value="programmer2">–Æ—Ä–∞</option>
                <option value="programmer3">–†–æ–º–∞</option>
            </select>
        </div>

        <div class="phases-container" id="phasesContainer">
            <!-- Phases will be dynamically generated -->
        </div>

        <div class="programmers-section">
            <h2>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞–º</h2>
            <div class="programmers-grid" id="programmersGrid">
                <!-- Programmer cards will be dynamically generated -->
            </div>
        </div>
    </div>

    <!-- Modal for assigning programmer -->
    <div id="assignModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>–ù–∞–∑–Ω–∞—á–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞</h2>
            <p id="modalDescription">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞: <strong id="modalPhaseName"></strong></p>
            <div class="programmer-options">
                <button class="programmer-btn" data-programmer="programmer1">
                    <span class="programmer-icon">üë®‚Äçüíª</span>
                    <span>–ñ–µ–Ω—è</span>
                </button>
                <button class="programmer-btn" data-programmer="programmer2">
                    <span class="programmer-icon">üë®‚Äçüíª</span>
                    <span>–Æ—Ä–∞</span>
                </button>
                <button class="programmer-btn" data-programmer="programmer3">
                    <span class="programmer-icon">üë®‚Äçüíª</span>
                    <span>–†–æ–º–∞</span>
                </button>
                <button class="programmer-btn" data-programmer="unassigned">
                    <span class="programmer-icon">‚ùå</span>
                    <span>–°–Ω—è—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π -->
    <script>
        (function() {
            console.log('üîÑ –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É Firebase SDK...');
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞
            function loadScript(src, callback) {
                const script = document.createElement('script');
                script.src = src;
                script.async = false; // –í–∞–∂–Ω–æ: –∑–∞–≥—Ä—É–∂–∞–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
                script.onload = function() {
                    console.log('‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω:', src);
                    if (callback) callback();
                };
                script.onerror = function() {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', src);
                    if (callback) callback(new Error('Failed to load ' + src));
                };
                document.head.appendChild(script);
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º Firebase –ø–æ –ø–æ—Ä—è–¥–∫—É
            loadScript('https://www.gstatic.com/firebasejs/6.10.0/firebase-app.js', function(err) {
                if (err) {
                    console.error('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å firebase-app.js');
                    return;
                }
                loadScript('https://www.gstatic.com/firebasejs/6.10.0/firebase-database.js', function(err) {
                    if (err) {
                        console.error('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å firebase-database.js');
                        return;
                    }
                    console.log('‚úÖ –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã Firebase –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ firebase –¥–æ—Å—Ç—É–ø–µ–Ω
                    if (typeof firebase !== 'undefined') {
                        console.log('‚úÖ Firebase –æ–±—ä–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ–Ω');
                    } else {
                        console.error('‚ùå Firebase –æ–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤');
                    }
                });
            });
        })();
    </script>
    <!-- –ù–∞—à–∏ —Å–∫—Ä–∏–ø—Ç—ã –ø–æ—Å–ª–µ Firebase -->
    <script src="firebase-config.js"></script>
    <script src="script.js"></script>
</body>
</html>
